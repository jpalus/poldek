<!doctype linuxdoc system>
<!-- $Id$ -->

<linuxdoc>
  <article> 
    <title> the poldek </title>
    <author> </author>
    <date> </date>

    <toc>

    <sect> Overview
    <p>

    The poldek is the RPM packages management helper tool; its
    basic features are similar to every modern package updater like <em>apt-get</em> --
    the program takes information about packages from package index file
    (<em>packages.dir.gz</em> by default) and allows packaging 
    installation, upgrading and removal. 
    Package dependencies are automatically handled, so if you need to install 
    a package which requires other packages to be installed, poldek downloads and
    installs all the required packages by itself. 

    Main poldek's advantages are:
    <itemize>

    <item> Relatively fast dependency processing
    <p>
    Package dependencies, conflicts and setting in order are handled by poldek
    itself without using rpmlib, so the program is significantly faster and uses
    less memory than rpmlib-based tools.

    
    <item> "Smart" installation of a big package sets 
    <p> 
    Before their installation packages are divided into small groups,
    usually from 2 to 10 items (depending on their reciprocal dependencies).
    Each group is installed separately, which ensures that unsucessful installation
    of one of the groups doesn't influence other groups. 

<!-- It means that # i.e. it is allowed to install as manye packages as possible. -->

    Another benefit of this separate installation is that it requires
    less memory and disk space than the usual one.
   
    <item> Interactive mode 
    <p>
    
    The poldek can work in two modes: a batch mode (in use similar
    to <em>apt-get</em> one) and <em>interactive</em> one. The interactive 
    mode puts the user into a readline interface with command line auto-completion 
    and history. In this mode the user is able to browse, search, download,
    install/upgrade and deinstall packages. In its concept it   is similar 
    to shell mode of Perl's CPAN module
    (see sample <url name="interactive mode session" 
              url="screenshoots.html#shell-session">).

    <item> Installation system from scratch needs 8-12 MB memory only
    <p>	
    During this type of install packages are downloaded and installed separately, 
    so used memory size is independent of number of packages intended
    to install. Program is used by <url name="PLD Installer" 
    url="http://team.pld.org.pl/~klakier/doc/pld-installer/en/index.html">
    

    <item> Quick package set verification for unresolved dependencies 
    unneeded conflicts and dependency loops. <p>
    Feature is useful for distribution maintainers; see sample
    <url name="report" url="screenshoots.html#verify-report">.

    <item> Division package set for the purpose of placing it
      on removable media (like CDROM or ZIP).
    <p>

    Program divide packages in the way that minimize needs of  
    disk changes; for example if distribution fits on 3 CDs, then 
    only 2 changes of CD disk are necessary during installation system 
    from scratch.
    This feature is used for making PLD CD ISO images, see 
    <url name="geniso-poldek" 
    url="ftp://ftp.pld.org.pl/.stat/geniso-poldek"> 
    script for details. 


    <item> Support for "patches" of package index 
    <p>
    To save users time and bandwidth program supports "incremental indexes"
    which is very useful with repositories which frequently change. This feature 
    consist in creation "patches" of index which gives the users possibility to update 
    local index by download "patch" with information of changes only.

    <item> Program is prepared to be run by ordinary user, installation 
    of packages in that case can be done with <em>sudo</em>. 

    </itemize>

    <sect> Quick start 
    <p>
    <sect1> Prepare package repository to be usable to poldek
    <p>
    <tscreen><verb>
    $ poldek -s DIR --mkidxz
    </verb></tscreen>

    As result several files will be created under DIR: 
    <itemize>
    <item> <em>packages.dir.gz</em>  with all needed package data 
    <item> <em>packages.dir.mdd </em> with packages.dir.gz's digest
    <item> <em>packages.dir.toc.gz </em> with list of packages 
    </itemize>

    Additionally if previous <em>DIR/packages.dir.gz</em> is different from 
    currently created one then index "patch" is created under <em>DIR/packages.i/</em>
  
    Example:
    <tscreen><verb>
 $ poldek -s /home/ftp/pub/PLD/RPMS --mkidxz
 Loading /home/ftp/pub/PLD/RPMS/...200..400..600..800..1000..1200..1400..1600
 ..1800..2000..2200..2400..2600..2800..3000..3063
 3063 packages read
 Loading previous /home/ftp/pub/PLD/RPMS/packages.dir.gz...
 Verifying /home/ftp/pub/PLD/RPMS/packages.dir.gz... OK
 Writing /home/ftp/pub/PLD/RPMS/packages.i/packages.dir.diff.2002.02.24-18.57.31.gz... 
 Writing digest /mnt/PLD/packages.i/packages.dir.diff.2002.02.24-18.57.31.mdd...
 Writing /home/ftp/pub/PLD/RPMS/packages.dir.gz...
 Writing digest /home/ftp/pub/PLD/RPMS/packages.dir.mdd...
    </verb></tscreen>
<p>      
Local repositories is usable to poldek directly, without existing packages.dir.*,
however this is much slower. 
</p>

    <sect1> Use the program 
    <p>
    <tscreen><verb>
    $ poldek -s SOURCE [OPTION...] [PACKAGE...]
    </verb></tscreen>

For example:
    <tscreen><verb>
    $ poldek -s /home/ftp/pub/PLD/RPMS -uv foo
    $ poldek -s ftp://localhost/ftp/pub/PLD/RPMS -V
    </verb></tscreen>
     
    See also <url name="sample interactive mode session" url="screenshoots.html">.

    <sect> Documentation 
    <p>
    <itemize>
    <item> <url url="poldek.html" name="man page">
    <item> PLD admin manual 
  <url url="http://team.pld.org.pl/~klakier/doc/pld-admin-manual/en/index.html#id129972" 
   name="subsection"> about poldek (partially obsoleted)
    </itemize>
    </sect> 

    <sect> Availability
    <p>
    The program is free software; you can redistribute it and/or modify
    it under the terms of the GNU General Public License, version 2 as
    published by the Free Software Foundation.

    See <url url="NEWS" name="NEWS"> 
    for a list of major changes in the current release.
	
    <itemize> 
    <item> Homepage 
      <url url="http://team.pld.org.pl/~mis/poldek/" 
           name="http://team.pld.org.pl/~mis/poldek/">
	<p> 
    </item>

    <item> Source tarballs and rpm source packages
      <p>	
      <itemize>
      <item> 
<url url="http://team.pld.org.pl/~mis/poldek/download/poldek-@VERSION@.tar.gz" 
     name="http://team.pld.org.pl/~mis/poldek/download/poldek-@VERSION@.tar.gz"> 

      <item> 
<url url="http://team.pld.org.pl/~mis/poldek/download/poldek-@VERSION@-1.src.rpm" 
     name="http://team.pld.org.pl/~mis/poldek/download/poldek-@VERSION@-1.src.rpm">  
     </itemize>

     Older versions are available 
	<url url="http://team.pld.org.pl/~mis/poldek/download/" name="here">

     Development snapshots are available
        <url url="http://team.pld.org.pl/~mis/poldek/download/snapshots/" name="here">

     <item> Binary rpm packages
	<p>
	<itemize>
	<item> PLD Linux packages (linked with rpm 4.0.2)
	<itemize>
	<item>
	<url url="download/poldek-@VERSION@-1.i386.rpm" 
	     name="http://team.pld.org.pl/~mis/poldek/download/poldek-@VERSION@-1.i386.rpm">  
	
	<item> Statically linked
	    <url url="download/poldek-@VERSION@-1.static.i386.rpm" 
	      name="http://team.pld.org.pl/~mis/poldek/download/poldek-@VERSION@-1.static.i386.rpm">  
	</itemize>
	
	<item> RedHat Linux packages (rpm 4.0.4)
	<itemize>
	<item> 7.3
	<url url="download/rh/7.3/poldek-@VERSION@-1.i386.rpm" 
	     name="http://team.pld.org.pl/~mis/poldek/download/rh/7.3/poldek-@VERSION@-1.i386.rpm">  

       	<item> 7.2 (< 0.15.8 versions only) 
	<url url="download/rh/7.2/poldek-0.17.8-1.i386.rpm" 
	     name="http://team.pld.org.pl/~mis/poldek/download/rh/7.2/poldek-0.17.8-1.i386.rpm">  
	
	</itemize>
        </itemize>	
<!-- 
     <p>
     Non static rpm packages, for several architectures can be downloaded from
     <url url="http://www.pld.org.pl/" name="PLD"> ftp site
     <url url="ftp://ftp.pld.org.pl/" name="ftp://ftp.pld.org.pl/"> (directory
	/dists/ra/PLD/<em>ARCH</em>/PLD/RPMS/)

-->         

    <item> Anonymous CVS
    <p>
      Getting the module (no password is needed): 
      <tscreen><verb>
      cvs -d :pserver:cvs@anoncvs.pld.org.pl:/cvsroot login
      cvs -d :pserver:cvs@anoncvs.pld.org.pl:/cvsroot get -r @VERSION_CVSTAG@ installer/poldek
      </verb></tscreen>            
      Particular files may be accessed via 
	<url url="http://cvs.pld.org.pl/installer/poldek/" name="CVSWeb">

    </item>
    </itemize>
    </sect>

    <sect> Mailing list
    <p>
    Program mailing list <tt>poldek@pld-linux.org</tt>. 
    To subscribe send mail to <url url="mailto:poldek-subscribe@pld-linux.org" 
    name="poldek-subscribe@pld-linux.org">
    
    <sect> Build
    <p>
    Program depends on following packages/libraries: glibc, ncurses, 
    openssl, pcre, readline, rpm and zlib <p>
    
    <sect> Author
	<p>
	Pawel A. Gajda (mis at pld.org.pl)
	<p>
	Thanks to Artur Frysiak (wiget at pld.org.pl), 
        Rafal Kleger-Rudomin (klakier at pld.org.pl) and
	Michal Moskal (malekith at pld.org.pl) for ideas, testing, 
        bug reports and patches. 
 
        <p> update 2002/09/20: Full list of contributors is under construction, for now 
        see <url url="NEWS" name="NEWS">
	</p>
		

<!--	$LOGO_INFO_URL$ -->
        <p>
	Thanks to Karol Krenski (mimooh at sgsp.edu.pl) for nice poldek's logo. See
        also other mimooh's works <url url="http://www.inf.sgsp.edu.pl/pub/MALUNKI/ROZNE/" name="1">,
	<url url="http://www.inf.sgsp.edu.pl/pub/MALUNKI/PLD/" name="2">.
   
    </sect>	
    
</article>
